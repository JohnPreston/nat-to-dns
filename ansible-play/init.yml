# - play to update the HAProxy as ELB Eucalyptus gonna change

- hosts:
  - localhost
  tasks:

  - name: Make sure Ansible is upgraded
    yum: name=ansible state=latest

  - name: Remove existing
    shell: file /etc/ansible/roles/nat-stack-init || rm -rfv /etc/ansible/roles/nat-stack-init
    ignore_errors: true

  - name: Download the latest version of init-stack
    git: clone=yes
         repo=https://github.com/johnpreston/nat-stack-init
         update=yes
         force=yes
         dest=/etc/ansible/roles/nat-stack-init
         version="{{ init_nat_version }}"

  - name: Download the latest git version of nat-deploy
    git: clone=yes
         repo=https://github.com/johnpreston/nat-stack-deploy
         update=yes
         force=yes
         dest=/etc/ansible/roles/nat-stack-deploy
         version="{{ deploy_nat_version }}"

  - name: Download the latest git version of nat-upgrade
    git: clone=yes
         repo=https://github.com/johnpreston/nat-stack-upgrade
         update=yes
         force=yes
         dest=/etc/ansible/roles/nat-stack-upgrade
         version="{{ upgrade_nat_version }}"
